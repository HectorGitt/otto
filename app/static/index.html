<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Otto - PC Control Assistant</title>
		<link
			href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
			rel="stylesheet"
		/>
		<style>
			:root {
				--primary-color: #6366f1;
				--primary-dark: #4f46e5;
				--secondary-color: #10b981;
				--accent-color: #f59e0b;
				--danger-color: #ef4444;
				--warning-color: #f59e0b;
				--success-color: #10b981;
				--info-color: #06b6d4;

				--bg-primary: #0f172a;
				--bg-secondary: #1e293b;
				--bg-tertiary: #334155;
				--bg-accent: #f8fafc;

				--text-primary: #f8fafc;
				--text-secondary: #cbd5e1;
				--text-muted: #94a3b8;

				--border-color: #334155;
				--border-light: #475569;

				--shadow-sm: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
				--shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
				--shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);

				--radius-sm: 6px;
				--radius-md: 8px;
				--radius-lg: 12px;
				--radius-xl: 16px;

				--transition-fast: 0.15s ease;
				--transition-normal: 0.3s ease;
				--transition-slow: 0.5s ease;
			}

			* {
				margin: 0;
				padding: 0;
				box-sizing: border-box;
			}

			body {
				font-family: "Inter", -apple-system, BlinkMacSystemFont,
					"Segoe UI", Roboto, sans-serif;
				background: var(--bg-primary);
				color: var(--text-primary);
				height: 100vh;
				display: flex;
				flex-direction: column;
				overflow: hidden;
			}

			/* Header */
			.header {
				background: var(--bg-secondary);
				padding: 1rem 1.5rem;
				border-bottom: 1px solid var(--border-color);
				display: flex;
				justify-content: space-between;
				align-items: center;
				backdrop-filter: blur(10px);
				-webkit-backdrop-filter: blur(10px);
			}

			.header h1 {
				font-size: 1.5rem;
				font-weight: 700;
				background: linear-gradient(
					135deg,
					var(--primary-color),
					var(--accent-color)
				);
				-webkit-background-clip: text;
				-webkit-text-fill-color: transparent;
				background-clip: text;
				display: flex;
				align-items: center;
				gap: 0.5rem;
			}

			.header h1 i {
				color: var(--primary-color);
			}

			.header-controls {
				display: flex;
				align-items: center;
				gap: 1rem;
			}

			.status-indicator {
				display: flex;
				align-items: center;
				gap: 0.5rem;
				font-size: 0.875rem;
				padding: 0.5rem 1rem;
				border-radius: var(--radius-md);
				transition: all var(--transition-fast);
			}

			.status-indicator.connected {
				background: rgba(16, 185, 129, 0.1);
				color: var(--success-color);
				border: 1px solid rgba(16, 185, 129, 0.2);
			}

			.status-indicator.disconnected {
				background: rgba(239, 68, 68, 0.1);
				color: var(--danger-color);
				border: 1px solid rgba(239, 68, 68, 0.2);
			}

			.status-indicator.connecting {
				background: rgba(245, 158, 11, 0.1);
				color: var(--warning-color);
				border: 1px solid rgba(245, 158, 11, 0.2);
			}

			.status-dot {
				width: 8px;
				height: 8px;
				border-radius: 50%;
				animation: pulse 2s infinite;
			}

			.status-indicator.connected .status-dot {
				background: var(--success-color);
			}

			.status-indicator.disconnected .status-dot {
				background: var(--danger-color);
			}

			.status-indicator.connecting .status-dot {
				background: var(--warning-color);
			}

			@keyframes pulse {
				0%,
				100% {
					opacity: 1;
				}
				50% {
					opacity: 0.5;
				}
			}

			.connect-btn {
				padding: 0.75rem 1.5rem;
				border: none;
				border-radius: var(--radius-md);
				cursor: pointer;
				font-weight: 600;
				font-size: 0.875rem;
				transition: all var(--transition-fast);
				display: flex;
				align-items: center;
				gap: 0.5rem;
				position: relative;
				overflow: hidden;
			}

			.connect-btn::before {
				content: "";
				position: absolute;
				top: 0;
				left: -100%;
				width: 100%;
				height: 100%;
				background: linear-gradient(
					90deg,
					transparent,
					rgba(255, 255, 255, 0.2),
					transparent
				);
				transition: left 0.5s;
			}

			.connect-btn:hover::before {
				left: 100%;
			}

			.connect-btn.disconnected {
				background: var(--primary-color);
				color: white;
				box-shadow: var(--shadow-md);
			}

			.connect-btn.disconnected:hover {
				background: var(--primary-dark);
				transform: translateY(-1px);
				box-shadow: var(--shadow-lg);
			}

			.connect-btn.connected {
				background: var(--danger-color);
				color: white;
			}

			.connect-btn.connecting {
				background: var(--warning-color);
				color: white;
				animation: connecting-pulse 1.5s infinite;
			}

			@keyframes connecting-pulse {
				0%,
				100% {
					opacity: 1;
				}
				50% {
					opacity: 0.8;
				}
			}

			/* Main Layout */
			.main {
				flex: 1;
				display: flex;
				gap: 1rem;
				padding: 1rem;
				height: calc(100vh - 80px);
				overflow: hidden;
			}

			/* Messages Pane */
			.messages-pane {
				flex: 3;
				background: var(--bg-secondary);
				border-radius: var(--radius-lg);
				display: flex;
				flex-direction: column;
				overflow: hidden;
				border: 1px solid var(--border-color);
				box-shadow: var(--shadow-md);
			}

			.messages-header {
				padding: 1.25rem 1.5rem;
				border-bottom: 1px solid var(--border-color);
				font-weight: 600;
				font-size: 1.125rem;
				display: flex;
				align-items: center;
				gap: 0.5rem;
				background: var(--bg-tertiary);
			}

			.messages-header i {
				color: var(--primary-color);
			}

			.messages-content {
				flex: 1;
				overflow-y: auto;
				padding: 1rem;
				display: flex;
				flex-direction: column;
				gap: 1rem;
			}

			.messages-content::-webkit-scrollbar {
				width: 6px;
			}

			.messages-content::-webkit-scrollbar-track {
				background: var(--bg-tertiary);
			}

			.messages-content::-webkit-scrollbar-thumb {
				background: var(--border-light);
				border-radius: 3px;
			}

			.messages-content::-webkit-scrollbar-thumb:hover {
				background: var(--text-muted);
			}

			.message {
				display: flex;
				margin-bottom: 0.5rem;
				animation: slideIn 0.3s ease-out;
			}

			.message.user {
				justify-content: flex-end;
			}

			.message.assistant {
				justify-content: flex-start;
			}

			@keyframes slideIn {
				from {
					opacity: 0;
					transform: translateY(10px);
				}
				to {
					opacity: 1;
					transform: translateY(0);
				}
			}

			.message-bubble {
				max-width: 75%;
				padding: 1rem 1.25rem;
				border-radius: var(--radius-lg);
				word-wrap: break-word;
				position: relative;
				font-size: 0.95rem;
				line-height: 1.5;
				box-shadow: var(--shadow-sm);
			}

			.message.user .message-bubble {
				background: linear-gradient(
					135deg,
					var(--primary-color),
					var(--primary-dark)
				);
				color: white;
				border-bottom-right-radius: 4px;
			}

			.message.assistant .message-bubble {
				background: var(--bg-tertiary);
				color: var(--text-primary);
				border-bottom-left-radius: 4px;
				border: 1px solid var(--border-color);
			}

			.message-bubble img {
				max-width: 200px;
				border-radius: var(--radius-md);
				margin-top: 0.5rem;
				display: block;
			}

			.message.system {
				justify-content: center;
				margin: 1rem 0;
			}

			.message.system .message-bubble {
				background: var(--bg-tertiary);
				color: var(--text-secondary);
				border: 1px solid var(--border-color);
				max-width: 80%;
				text-align: center;
				font-size: 0.9rem;
				opacity: 0.9;
			}

			.message.system.success .message-bubble {
				background: rgba(16, 185, 129, 0.1);
				color: var(--success-color);
				border-color: rgba(16, 185, 129, 0.3);
			}

			.message.system.warning .message-bubble {
				background: rgba(245, 158, 11, 0.1);
				color: var(--warning-color);
				border-color: rgba(245, 158, 11, 0.3);
			}

			.message.system.error .message-bubble {
				background: rgba(239, 68, 68, 0.1);
				color: var(--danger-color);
				border-color: rgba(239, 68, 68, 0.3);
			}

			.message.system.info .message-bubble {
				background: rgba(6, 182, 212, 0.1);
				color: var(--info-color);
				border-color: rgba(6, 182, 212, 0.3);
			}

			/* Right Column */
			.right-column {
				flex: 1;
				display: flex;
				flex-direction: column;
				gap: 1rem;
			}

			/* Events Pane */
			.events-pane {
				flex: 1;
				background: var(--bg-secondary);
				border-radius: var(--radius-lg);
				display: flex;
				flex-direction: column;
				overflow: hidden;
				border: 1px solid var(--border-color);
				box-shadow: var(--shadow-md);
				max-height: 35vh;
			}

			.events-header {
				padding: 1.25rem 1.5rem;
				border-bottom: 1px solid var(--border-color);
				font-weight: 600;
				font-size: 1.125rem;
				display: flex;
				align-items: center;
				gap: 0.5rem;
				background: var(--bg-tertiary);
			}

			.events-header i {
				color: var(--info-color);
			}

			.events-content {
				flex: 1;
				overflow-y: auto;
				padding: 0.5rem;
			}

			.events-content::-webkit-scrollbar {
				width: 6px;
			}

			.events-content::-webkit-scrollbar-track {
				background: var(--bg-tertiary);
			}

			.events-content::-webkit-scrollbar-thumb {
				background: var(--border-light);
				border-radius: 3px;
			}

			.events-content::-webkit-scrollbar-thumb:hover {
				background: var(--text-muted);
			}

			/* Tools Pane */
			.tools-pane {
				flex: 1;
				background: var(--bg-secondary);
				border-radius: var(--radius-lg);
				display: flex;
				flex-direction: column;
				overflow: hidden;
				border: 1px solid var(--border-color);
				box-shadow: var(--shadow-md);
				max-height: 35vh;
			}

			.tools-header {
				padding: 1.25rem 1.5rem;
				border-bottom: 1px solid var(--border-color);
				font-weight: 600;
				font-size: 1.125rem;
				display: flex;
				align-items: center;
				gap: 0.5rem;
				background: var(--bg-tertiary);
			}

			.tools-header i {
				color: var(--accent-color);
			}

			.tools-content {
				flex: 1;
				overflow-y: auto;
				padding: 0.5rem;
			}

			.tools-content::-webkit-scrollbar {
				width: 6px;
			}

			.tools-content::-webkit-scrollbar-track {
				background: var(--bg-tertiary);
			}

			.tools-content::-webkit-scrollbar-thumb {
				background: var(--border-light);
				border-radius: 3px;
			}

			.tools-content::-webkit-scrollbar-thumb:hover {
				background: var(--text-muted);
			}

			/* Event Items */
			.event {
				border: 1px solid var(--border-color);
				border-radius: var(--radius-md);
				margin-bottom: 0.5rem;
				background: var(--bg-tertiary);
				transition: all var(--transition-fast);
			}

			.event:hover {
				border-color: var(--border-light);
				transform: translateY(-1px);
				box-shadow: var(--shadow-md);
			}

			.event-header {
				padding: 0.875rem 1rem;
				cursor: pointer;
				display: flex;
				justify-content: space-between;
				align-items: center;
				font-family: "JetBrains Mono", "Fira Code", monospace;
				font-size: 0.875rem;
				transition: all var(--transition-fast);
			}

			.event-header:hover {
				background: rgba(255, 255, 255, 0.05);
			}

			.event-header span:first-child {
				font-weight: 600;
				color: var(--text-primary);
			}

			.event-header span:last-child {
				color: var(--text-muted);
				font-size: 0.75rem;
				transition: transform var(--transition-fast);
			}

			.event-content {
				padding: 0.875rem 1rem;
				background: var(--bg-primary);
				border-top: 1px solid var(--border-color);
				font-family: "JetBrains Mono", "Fira Code", monospace;
				font-size: 0.8rem;
				white-space: pre-wrap;
				max-height: 200px;
				overflow-y: auto;
				color: var(--text-secondary);
			}

			.event-content.collapsed {
				display: none;
			}

			.event-content::-webkit-scrollbar {
				width: 4px;
			}

			.event-content::-webkit-scrollbar-thumb {
				background: var(--border-light);
				border-radius: 2px;
			}

			/* Tool Events */
			.tools-content .event-header {
				cursor: default;
				font-family: -apple-system, BlinkMacSystemFont, "Segoe UI",
					Roboto, sans-serif;
				padding: 1rem;
			}

			.tools-content .event-header.handoff {
				background: linear-gradient(
					135deg,
					rgba(139, 92, 246, 0.1),
					rgba(139, 92, 246, 0.05)
				);
				border-left: 4px solid var(--primary-color);
			}

			.tools-content .event-header.tool {
				background: linear-gradient(
					135deg,
					rgba(245, 158, 11, 0.1),
					rgba(245, 158, 11, 0.05)
				);
				border-left: 4px solid var(--accent-color);
			}

			.tools-content .event-header.tool.success {
				background: linear-gradient(
					135deg,
					rgba(16, 185, 129, 0.1),
					rgba(16, 185, 129, 0.05)
				);
				border-left: 4px solid var(--success-color);
			}

			.tools-content .event-header.tool.error {
				background: linear-gradient(
					135deg,
					rgba(239, 68, 68, 0.1),
					rgba(239, 68, 68, 0.05)
				);
				border-left: 4px solid var(--danger-color);
			}

			/* Controls */
			.controls {
				padding: 1rem 1.5rem;
				border-top: 1px solid var(--border-color);
				background: var(--bg-tertiary);
				display: flex;
				gap: 0.75rem;
				align-items: center;
				flex-wrap: wrap;
			}

			.control-group {
				display: flex;
				align-items: center;
				gap: 0.5rem;
			}

			.mute-btn {
				padding: 0.75rem 1.25rem;
				border: none;
				border-radius: var(--radius-md);
				cursor: pointer;
				font-weight: 600;
				font-size: 0.875rem;
				transition: all var(--transition-fast);
				display: flex;
				align-items: center;
				gap: 0.5rem;
				position: relative;
				overflow: hidden;
			}

			.mute-btn.unmuted {
				background: var(--success-color);
				color: white;
				box-shadow: var(--shadow-sm);
			}

			.mute-btn.unmuted:hover {
				background: #059669;
				transform: translateY(-1px);
				box-shadow: var(--shadow-md);
			}

			.mute-btn.muted {
				background: var(--danger-color);
				color: white;
			}

			.mute-btn.active {
				animation: mic-active 1s infinite;
			}

			@keyframes mic-active {
				0%,
				100% {
					opacity: 1;
				}
				50% {
					opacity: 0.8;
				}
			}

			.image-upload-group {
				display: flex;
				align-items: center;
				gap: 0.5rem;
			}

			.image-prompt {
				padding: 0.75rem 1rem;
				border: 1px solid var(--border-color);
				border-radius: var(--radius-md);
				background: var(--bg-secondary);
				color: var(--text-primary);
				font-size: 0.875rem;
				transition: all var(--transition-fast);
				min-width: 200px;
			}

			.image-prompt:focus {
				outline: none;
				border-color: var(--primary-color);
				box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
			}

			.image-prompt::placeholder {
				color: var(--text-muted);
			}

			.image-btn {
				padding: 0.75rem 1.25rem;
				border: 1px solid var(--border-color);
				border-radius: var(--radius-md);
				background: var(--bg-secondary);
				color: var(--text-primary);
				cursor: pointer;
				font-weight: 500;
				font-size: 0.875rem;
				transition: all var(--transition-fast);
				display: flex;
				align-items: center;
				gap: 0.5rem;
			}

			.image-btn:hover {
				background: var(--bg-tertiary);
				border-color: var(--border-light);
				transform: translateY(-1px);
			}

			.image-btn:active {
				transform: translateY(0);
			}

			.image-input {
				position: absolute;
				left: -9999px;
				width: 1px;
				height: 1px;
				opacity: 0;
			}

			/* Status */
			.status {
				font-size: 0.875rem;
				color: var(--text-muted);
				font-weight: 500;
			}

			.status.connected {
				color: var(--success-color);
			}

			.status.disconnected {
				color: var(--danger-color);
			}

			.status.connecting {
				color: var(--warning-color);
			}

			/* Loading Animation */
			.loading {
				display: inline-block;
				width: 16px;
				height: 16px;
				border: 2px solid rgba(255, 255, 255, 0.3);
				border-radius: 50%;
				border-top-color: white;
				animation: spin 1s ease-in-out infinite;
			}

			@keyframes spin {
				to {
					transform: rotate(360deg);
				}
			}

			/* Responsive Design */
			@media (max-width: 1024px) {
				.main {
					flex-direction: column;
					height: calc(100vh - 120px);
				}

				.messages-pane {
					flex: 1;
				}

				.right-column {
					flex-direction: row;
					flex: 1;
				}

				.events-pane,
				.tools-pane {
					flex: 1;
				}

				.controls {
					flex-wrap: wrap;
					gap: 0.5rem;
				}

				.image-prompt {
					min-width: 150px;
					flex: 1;
				}
			}

			@media (max-width: 768px) {
				.header {
					padding: 1rem;
					flex-direction: column;
					gap: 1rem;
					align-items: stretch;
				}

				.header h1 {
					text-align: center;
				}

				.header-controls {
					justify-content: center;
				}

				.main {
					padding: 0.5rem;
				}

				.right-column {
					flex-direction: column;
				}

				.controls {
					padding: 0.75rem 1rem;
					flex-direction: column;
					align-items: stretch;
					gap: 0.75rem;
				}

				.control-group {
					justify-content: center;
				}

				.image-upload-group {
					flex-direction: column;
					align-items: stretch;
				}

				.image-prompt {
					min-width: auto;
				}

				.message-bubble {
					max-width: 90%;
				}
			}

			/* Accessibility */
			@media (prefers-reduced-motion: reduce) {
				* {
					animation-duration: 0.01ms !important;
					animation-iteration-count: 1 !important;
					transition-duration: 0.01ms !important;
				}
			}

			/* Focus states */
			.connect-btn:focus,
			.mute-btn:focus,
			.image-btn:focus,
			.image-prompt:focus {
				outline: 2px solid var(--primary-color);
				outline-offset: 2px;
			}

			/* Print styles */
			@media print {
				body {
					background: white;
					color: black;
				}

				.header,
				.controls,
				.events-pane,
				.tools-pane {
					display: none;
				}

				.messages-pane {
					border: none;
					box-shadow: none;
				}

				.message-bubble {
					border: 1px solid #ccc;
					background: white !important;
					color: black !important;
				}
			}
		</style>
	</head>
	<body>
		<div class="header">
			<h1><i class="fas fa-robot"></i> Otto - PC Control Assistant</h1>
			<div class="header-controls">
				<div id="statusIndicator" class="status-indicator disconnected">
					<div class="status-dot"></div>
					<span id="statusText">Disconnected</span>
				</div>
				<button id="connectBtn" class="connect-btn disconnected">
					<i class="fas fa-plug"></i>
					<span>Connect</span>
				</button>
			</div>
		</div>

		<div class="main">
			<div class="messages-pane">
				<div class="messages-header">
					<i class="fas fa-comments"></i>
					Conversation
				</div>
				<div id="messagesContent" class="messages-content">
					<!-- Messages will appear here -->
					<div class="message assistant">
						<div class="message-bubble">
							<i
								class="fas fa-wave-hello"
								style="margin-right: 0.5rem"
							></i>
							Hello! I'm Otto, your PC control assistant. I can
							help you open applications, click on screen
							elements, type text, and control your computer
							through voice commands. Click "Connect" to get
							started!
						</div>
					</div>
				</div>
				<div class="controls">
					<div class="control-group">
						<button id="muteBtn" class="mute-btn unmuted" disabled>
							<i class="fas fa-microphone"></i>
							<span>Mic On</span>
						</button>
					</div>
					<div class="image-upload-group">
						<input
							id="imagePrompt"
							type="text"
							placeholder="Describe what you see..."
							class="image-prompt"
						/>
						<button id="imageBtn" type="button" class="image-btn">
							<i class="fas fa-camera"></i>
							<span>Send Image</span>
						</button>
						<input
							id="imageInput"
							type="file"
							accept="image/*"
							class="image-input"
						/>
					</div>
					<div class="status" id="connectionStatus">
						Ready to connect
					</div>
				</div>
			</div>

			<div class="right-column">
				<div class="events-pane">
					<div class="events-header">
						<i class="fas fa-stream"></i>
						Event Stream
					</div>
					<div id="eventsContent" class="events-content">
						<!-- Events will appear here -->
					</div>
				</div>

				<div class="tools-pane">
					<div class="tools-header">
						<i class="fas fa-tools"></i>
						Tools & Actions
					</div>
					<div id="toolsContent" class="tools-content">
						<!-- Tools and handoffs will appear here -->
					</div>
				</div>
			</div>
		</div>

		<script src="app.js"></script>
	</body>
</html>
